# æ—…è¡Œè®¡åˆ’ç”Ÿæˆå™¨æ€§èƒ½ä¼˜åŒ–æŒ‡å—

## ğŸš€ å‰ç«¯æ€§èƒ½ä¼˜åŒ–

### 1. ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
- âœ… å·²å®ç°é¡µé¢çº§åˆ«çš„æ‡’åŠ è½½ï¼ˆReact.lazyï¼‰
- âœ… è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰²
- ğŸ”„ å»ºè®®ï¼šç»„ä»¶çº§åˆ«çš„æ‡’åŠ è½½ï¼ˆå¤§å‹è¡¨å•ç»„ä»¶ï¼‰

### 2. çŠ¶æ€ç®¡ç†ä¼˜åŒ–
- âœ… ä½¿ç”¨React hooksè¿›è¡ŒçŠ¶æ€ç®¡ç†
- âœ… é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
- ğŸ”„ å»ºè®®ï¼šä½¿ç”¨React.memoä¼˜åŒ–ç»„ä»¶æ¸²æŸ“

### 3. ç½‘ç»œè¯·æ±‚ä¼˜åŒ–
- âœ… å®ç°è¯·æ±‚é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- âœ… æ·»åŠ åŠ è½½çŠ¶æ€å’Œè¿›åº¦æŒ‡ç¤º
- ğŸ”„ å»ºè®®ï¼šå®ç°è¯·æ±‚ç¼“å­˜å’Œé˜²æŠ–

### 4. ç§»åŠ¨ç«¯ä¼˜åŒ–
- âœ… å“åº”å¼è®¾è®¡
- âœ… è§¦æ‘¸å‹å¥½çš„ç•Œé¢
- ğŸ”„ å»ºè®®ï¼šè™šæ‹Ÿæ»šåŠ¨ï¼ˆé•¿åˆ—è¡¨ï¼‰

## ğŸ”§ åç«¯æ€§èƒ½ä¼˜åŒ–

### 1. æ•°æ®åº“ä¼˜åŒ–
```sql
-- ä¸ºæ—…è¡Œè®¡åˆ’è¡¨æ·»åŠ ç´¢å¼•
CREATE INDEX idx_travel_plans_user_id ON travel_plans(user_id);
CREATE INDEX idx_travel_plans_created_at ON travel_plans(created_at);
CREATE INDEX idx_travel_plans_share_token ON travel_plans(share_token);
CREATE INDEX idx_plan_views_plan_id ON plan_views(plan_id);
CREATE INDEX idx_plan_favorites_user_plan ON plan_favorites(user_id, plan_id);
```

### 2. APIå“åº”ä¼˜åŒ–
- âœ… åˆ†é¡µæŸ¥è¯¢å®ç°
- âœ… å­—æ®µé€‰æ‹©æ€§è¿”å›
- ğŸ”„ å»ºè®®ï¼šå“åº”å‹ç¼©ï¼ˆgzipï¼‰

### 3. ç¼“å­˜ç­–ç•¥
```python
# Redisç¼“å­˜é…ç½®ç¤ºä¾‹
CACHE_CONFIG = {
    'mcp_status': {'ttl': 300},  # MCPçŠ¶æ€ç¼“å­˜5åˆ†é’Ÿ
    'user_location': {'ttl': 3600},  # ç”¨æˆ·ä½ç½®ç¼“å­˜1å°æ—¶
    'plan_sharing': {'ttl': 1800},  # åˆ†äº«è®¡åˆ’ç¼“å­˜30åˆ†é’Ÿ
}
```

### 4. å¼‚æ­¥å¤„ç†
- âœ… MCPå·¥å…·å¹¶è¡Œè°ƒç”¨
- âœ… å¼‚æ­¥AIè®¡åˆ’ç”Ÿæˆ
- ğŸ”„ å»ºè®®ï¼šåå°ä»»åŠ¡é˜Ÿåˆ—ï¼ˆCeleryï¼‰

## ğŸ“Š ç›‘æ§å’Œåˆ†æ

### 1. æ€§èƒ½æŒ‡æ ‡
```javascript
// å‰ç«¯æ€§èƒ½ç›‘æ§
const performanceMetrics = {
    pageLoadTime: performance.timing.loadEventEnd - performance.timing.navigationStart,
    domContentLoaded: performance.timing.domContentLoadedEventEnd - performance.timing.navigationStart,
    firstPaint: performance.getEntriesByType('paint')[0]?.startTime,
    firstContentfulPaint: performance.getEntriesByType('paint')[1]?.startTime
};
```

### 2. é”™è¯¯ç›‘æ§
```python
# åç«¯é”™è¯¯ç›‘æ§
import logging
from loguru import logger

# é…ç½®æ€§èƒ½æ—¥å¿—
logger.add("logs/performance.log", 
          filter=lambda record: "performance" in record["extra"],
          rotation="1 day")
```

### 3. ç”¨æˆ·ä½“éªŒæŒ‡æ ‡
- è¡¨å•å¡«å†™å®Œæˆç‡
- è®¡åˆ’ç”ŸæˆæˆåŠŸç‡
- åˆ†äº«é“¾æ¥ç‚¹å‡»ç‡
- é¡µé¢åœç•™æ—¶é—´

## ğŸ”„ æŒç»­ä¼˜åŒ–å»ºè®®

### 1. çŸ­æœŸä¼˜åŒ–ï¼ˆ1-2å‘¨ï¼‰
- [ ] å®ç°è¯·æ±‚é˜²æŠ–å’ŒèŠ‚æµ
- [ ] æ·»åŠ ç»„ä»¶çº§åˆ«çš„æ‡’åŠ è½½
- [ ] ä¼˜åŒ–å›¾ç‰‡åŠ è½½ï¼ˆæ‡’åŠ è½½ã€WebPæ ¼å¼ï¼‰
- [ ] å®ç°ç¦»çº¿ç¼“å­˜ï¼ˆService Workerï¼‰

### 2. ä¸­æœŸä¼˜åŒ–ï¼ˆ1ä¸ªæœˆï¼‰
- [ ] å®ç°Redisç¼“å­˜
- [ ] æ·»åŠ CDNæ”¯æŒ
- [ ] æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- [ ] å®ç°APIé™æµ

### 3. é•¿æœŸä¼˜åŒ–ï¼ˆ3ä¸ªæœˆï¼‰
- [ ] å¾®æœåŠ¡æ¶æ„æ‹†åˆ†
- [ ] å®ç°åˆ†å¸ƒå¼ç¼“å­˜
- [ ] æ·»åŠ è´Ÿè½½å‡è¡¡
- [ ] å®ç°è‡ªåŠ¨æ‰©ç¼©å®¹

## ğŸ“ˆ æ€§èƒ½æµ‹è¯•

### 1. å‰ç«¯æ€§èƒ½æµ‹è¯•
```bash
# ä½¿ç”¨Lighthouseè¿›è¡Œæ€§èƒ½æµ‹è¯•
npm install -g lighthouse
lighthouse http://localhost:3000/ai-travel --output html --output-path ./performance-report.html
```

### 2. åç«¯æ€§èƒ½æµ‹è¯•
```bash
# ä½¿ç”¨Apache Benchè¿›è¡Œå‹åŠ›æµ‹è¯•
ab -n 1000 -c 10 http://localhost:5000/travel/api/plans
```

### 3. ç«¯åˆ°ç«¯æ€§èƒ½æµ‹è¯•
```python
# è¿è¡Œæ€§èƒ½æµ‹è¯•è„šæœ¬
python tests/performance_test.py
```

## ğŸ¯ æ€§èƒ½ç›®æ ‡

### å‰ç«¯æ€§èƒ½ç›®æ ‡
- é¦–å±åŠ è½½æ—¶é—´ < 2ç§’
- é¡µé¢åˆ‡æ¢æ—¶é—´ < 500ms
- è¡¨å•æäº¤å“åº”æ—¶é—´ < 1ç§’
- Lighthouseæ€§èƒ½è¯„åˆ† > 90

### åç«¯æ€§èƒ½ç›®æ ‡
- APIå“åº”æ—¶é—´ < 200msï¼ˆ95%ï¼‰
- æ•°æ®åº“æŸ¥è¯¢æ—¶é—´ < 100ms
- å¹¶å‘ç”¨æˆ·æ•° > 100
- ç³»ç»Ÿå¯ç”¨æ€§ > 99.9%

### ç”¨æˆ·ä½“éªŒç›®æ ‡
- è®¡åˆ’ç”ŸæˆæˆåŠŸç‡ > 95%
- ç”¨æˆ·æ»¡æ„åº¦ > 4.5/5
- é¡µé¢è·³å‡ºç‡ < 30%
- åŠŸèƒ½ä½¿ç”¨ç‡ > 80%

## ğŸ› ï¸ ä¼˜åŒ–å·¥å…·æ¨è

### å‰ç«¯å·¥å…·
- **Webpack Bundle Analyzer**: åˆ†ææ‰“åŒ…ä½“ç§¯
- **React DevTools Profiler**: åˆ†æç»„ä»¶æ€§èƒ½
- **Chrome DevTools**: æ€§èƒ½åˆ†æå’Œè°ƒè¯•
- **Lighthouse**: ç»¼åˆæ€§èƒ½è¯„ä¼°

### åç«¯å·¥å…·
- **FastAPI-Profiler**: FastAPIåº”ç”¨æ€§èƒ½åˆ†æ
- **py-spy**: Pythonåº”ç”¨æ€§èƒ½ç›‘æ§
- **Redis**: ç¼“å­˜å’Œä¼šè¯å­˜å‚¨
- **Nginx**: åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡

### ç›‘æ§å·¥å…·
- **Sentry**: é”™è¯¯ç›‘æ§å’Œæ€§èƒ½è¿½è¸ª
- **Grafana**: æ€§èƒ½æŒ‡æ ‡å¯è§†åŒ–
- **Prometheus**: æŒ‡æ ‡æ”¶é›†å’Œç›‘æ§
- **ELK Stack**: æ—¥å¿—åˆ†æå’Œç›‘æ§

## ğŸ“ å®æ–½è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€ä¼˜åŒ–ï¼ˆå·²å®Œæˆï¼‰
- âœ… å‰ç«¯ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
- âœ… å“åº”å¼è®¾è®¡å’Œç§»åŠ¨ç«¯ä¼˜åŒ–
- âœ… è¡¨å•éªŒè¯å’Œé”™è¯¯å¤„ç†
- âœ… åŠ è½½çŠ¶æ€å’Œè¿›åº¦æŒ‡ç¤º

### ç¬¬äºŒé˜¶æ®µï¼šæ€§èƒ½æå‡ï¼ˆè¿›è¡Œä¸­ï¼‰
- ğŸ”„ æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
- ğŸ”„ APIå“åº”ç¼“å­˜
- ğŸ”„ å‰ç«¯ç»„ä»¶ä¼˜åŒ–
- ğŸ”„ é”™è¯¯ç›‘æ§ç³»ç»Ÿ

### ç¬¬ä¸‰é˜¶æ®µï¼šé«˜çº§ä¼˜åŒ–ï¼ˆè®¡åˆ’ä¸­ï¼‰
- ğŸ“‹ åˆ†å¸ƒå¼ç¼“å­˜
- ğŸ“‹ å¾®æœåŠ¡æ¶æ„
- ğŸ“‹ è‡ªåŠ¨åŒ–éƒ¨ç½²
- ğŸ“‹ æ€§èƒ½ç›‘æ§ä»ªè¡¨æ¿

é€šè¿‡ä»¥ä¸Šä¼˜åŒ–æªæ–½ï¼Œæ—…è¡Œè®¡åˆ’ç”Ÿæˆå™¨å°†èƒ½å¤Ÿæä¾›æ›´å¿«é€Ÿã€æ›´ç¨³å®šã€æ›´ç”¨æˆ·å‹å¥½çš„ä½“éªŒã€‚
